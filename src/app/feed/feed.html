<div class="feed-container" style="max-width: 600px; margin: 0 auto; padding: 20px;">
  
  <div class="share-box" style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 1px 2px rgba(0,0,0,0.2);">
    <textarea 
      [(ngModel)]="newPostContent" 
      placeholder="Neler d√º≈ü√ºn√ºyorsun?" 
      style="width: 100%; height: 80px; margin-bottom: 10px; resize: none;"
    ></textarea>
    <div style="text-align: right;">
      <button (click)="sharePost()">Payla≈ü</button>
    </div>
  </div>

  <div *ngFor="let post of posts" class="post-card">
    
    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
      <div class="post-header" style="font-weight: bold;">
        <a [routerLink]="['/profile', post.authorUsername]" style="color: #050505; text-decoration: none;">
          @{{ post.authorUsername }}
        </a>
      </div>

      <div *ngIf="currentUser && post.authorUsername === currentUser.username">
        <button (click)="startEditPost(post)" class="link-btn text-blue">D√ºzenle</button>
        <button (click)="deletePost(post)" class="link-btn text-red">Sil</button>
      </div>
    </div>
    
    <div *ngIf="editingPostId !== post.id" class="post-content" style="margin-bottom: 15px; font-size: 1.1em; color: #1c1e21;">
      {{ post.content }}
    </div>

    <div *ngIf="editingPostId === post.id" style="margin-bottom: 15px;">
      <textarea [(ngModel)]="editPostContent" style="width: 100%; height: 80px; margin-bottom: 5px;"></textarea>
      <div style="text-align: right;">
        <button (click)="editingPostId = null" class="btn-secondary" style="margin-right: 5px;">ƒ∞ptal</button>
        <button (click)="saveEditPost(post)" class="btn-success">Kaydet</button>
      </div>
    </div>

    <div class="post-actions" style="border-top: 1px solid #e4e6eb; padding-top: 10px;">
        <button (click)="likePost(post)" style="background: none; color: #65676b; padding: 5px; font-size: 0.95em;">
          <span *ngIf="currentUser && post.likes.includes(currentUser.username)">‚ù§Ô∏è</span>
          <span *ngIf="!currentUser || !post.likes.includes(currentUser.username)">ü§ç</span>
          {{ post.likes.length }} Beƒüeni
        </button>

        <hr style="margin: 10px 0; border: 0; border-top: 1px solid #e4e6eb;">

        <div class="comments-section" style="background-color: #f0f2f5; padding: 10px; border-radius: 8px;">
          
          <div *ngFor="let comment of post.comments" class="comment-item">
            
            <div *ngIf="editingCommentId !== comment.commentId" style="width: 100%; display: flex; justify-content: space-between;">
              <span style="font-size: 0.9em;">
                <b style="color: #050505;">{{ comment.authorUsername }}:</b> {{ comment.content }}
              </span>
              
              <div *ngIf="currentUser && comment.authorUsername === currentUser.username" class="comment-actions">
                <span (click)="startEditComment(comment)" class="text-blue">D√ºzenle</span>
                <span (click)="deleteComment(post, comment.commentId)" class="text-red">Sil</span>
              </div>
            </div>

            <div *ngIf="editingCommentId === comment.commentId" style="width: 100%; display: flex; gap: 5px;">
               <input type="text" [(ngModel)]="editCommentContent" style="flex: 1; padding: 5px;">
               <button (click)="saveEditComment(comment, post)" class="btn-success" style="padding: 5px 10px; font-size: 0.8em;">OK</button>
               <button (click)="editingCommentId = null" class="btn-secondary" style="padding: 5px 10px; font-size: 0.8em;">X</button>
            </div>

          </div>
          
          <div style="display: flex; margin-top: 10px; gap: 5px;">
            <input #commentInput type="text" placeholder="Bir yorum yaz..." style="flex: 1; border-radius: 20px; padding-left: 15px;">
            <button (click)="addComment(post, commentInput.value); commentInput.value=''" style="border-radius: 20px;">G√∂nder</button>
          </div>
        </div>

    </div>
  </div>
</div>